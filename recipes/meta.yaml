{% set name = "pyincore" %}
{% set version = "1.4.1" %}
 
package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  path: /path/to/pyincore

about:
  home: https://incore.ncsa.illinois.edu
  license: MPL-2.0
  summary: 'Python library for IN-CORE (Interdependent Networked Community Resilience Modeling Environment)'
  description: 'pyIncore is a component of IN-CORE. It is a python package consisting of two primary components: 
  1) a set of service classes to interact with the IN-CORE web services, and 2) IN-CORE analyses. The pyIncore 
  package allows users to apply various hazards to infrastructure in selected areas, propagating the effect of 
  physical infrastructure damage and loss of functionality to social and economic impacts.'
  dev_url: https://github.com/IN-CORE/pyincore
  doc_url: https://incore.ncsa.illinois.edu/doc/incore

build:
  # If this is a new build for the same version, increment the build
  # number. If you do not include this key, it defaults to 0.
  #number: 1
  noarch: python
  script: "{{ PYTHON }} -m pip install --no-deps --ignore-installed -vv . " # verbose
 
requirements:
  build:
    - python>=3.8
    - pip
    - numpy 1.23
 
  host:
    - python>=3.6
    - pip
    - numpy>=1.16

  run:
    - python>=3.6
    - ipopt>=3.11
    - {{ pin_compatible('numpy') }}
    - affine==2.3.1
    - attrs==21.4.0
    - certifi==2022.6.15
    - charset-normalizer==2.0.12
    - click==8.1.3
    - click-plugins==1.1.1
    - cligj==0.7.2
    - cycler==0.11.0
    - fiona==1.8.21
    - fonttools==4.33.3
    - geopandas==0.11.0
    - idna==3.3
    - jsonpickle==2.2.0
    - kiwisolver==1.4.3
    - matplotlib==3.5.2
    - munch==2.5.0
    - networkx==2.8.4
    - packaging==21.3
    - pandas==1.4.3
    - pillow==9.1.1
    - ply==3.11
    - pyomo==6.4.1
    - pyparsing==3.0.9
    - pyproj==3.3.1
    - python-dateutil==2.8.2
    - pytz==2022.1
    - rasterio==1.2.10
    - requests==2.28.0
    - scipy==1.8.1
    - shapely==1.8.2
    - six==1.16.0
    - snuggs==1.4.7
    - urllib3==1.26.9
    - wntr==0.4.1

test:
  # Python imports
  imports:
    - pyincore
    - pyomo
   
  requires:
    # Put any additional test requirements here.  For example
    - pytest>=3.9
    - folium==0.12.1.post1
    - python-jose==3.3.0
    - rtree==1.0.0

  commands:
    # You can put built-in test commands to be run here.  Use this to test that the entry points work.
    python -c "import pyincore; print('SUCCESS')" #; pyincore.test_client()"
    # You can also put a file called run_test.py in the recipe that will be run at test time.

